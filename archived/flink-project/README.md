# Flink Demo project

## Task 1  
- Process Side walk data and calculate # of street per area per city with conditions
	- PSTART != PEND
	- Shape_STLe > 100

```bash
# python pre-process geojson -> csv 
pip install -r requirements.txt
python script/fullJson2df.py
# flink script load csv and aggregrate on data table 
sbt clean compile
flink-1.10.0/bin/start-scala-shell.sh local
# src/main/scala/org/dev/ProcessSideWalkData.scala

# 南投縣,中寮鄉,9
# 南投縣,仁愛鄉,4
# 南投縣,信義鄉,1
# 南投縣,南投市,314
# 南投縣,名間鄉,9
# 南投縣,國姓鄉,11
# 南投縣,埔里鎮,70
# 南投縣,水里鄉,36
# 南投縣,竹山鎮,35
# 南投縣,草屯鎮,203
# 南投縣,集集鎮,27
# 南投縣,魚池鄉,10
# 南投縣,鹿谷鄉,11
# 台中市,中區,25
# 台中市,北區,311
# 台中市,北屯區,1321
# 台中市,南區,147
# 台中市,南屯區,1102
# 台中市,后里區,14
# 台中市,外埔區,4
# 台中市,大甲區,11
# 台中市,大肚區,6
# 台中市,大里區,348
# 台中市,大雅區,205
# 台中市,太平區,97
# 台中市,新社區,1
# 台中市,東勢區,8
# 台中市,東區,360
# 台中市,沙鹿區,18
# 台中市,清水區,10
# 台中市,潭子區,86
# 台中市,烏日區,36
# 台中市,神岡區,6
# 台中市,西區,324
# 台中市,西屯區,1144
# 台中市,豐原區,262
# 台中市,霧峰區,47
# 台中市,龍井區,4
# 台北市,中山區,1156
# 台北市,中正區,906
# 台北市,信義區,674
# 台北市,內湖區,1234
# 台北市,北投區,615
# 台北市,南港區,706
# 台北市,士林區,949
# 台北市,大同區,484
# 台北市,大安區,1126
# 台北市,文山區,776
# 台北市,松山區,886
# 台北市,萬華區,577
# 台南市,下營區,1
# 台南市,中西區,183
# 台南市,仁德區,77
# 台南市,佳里區,16
# 台南市,六甲區,11
# 台南市,北區,278
# 台南市,北門區,1
# 台南市,南區,399
# 台南市,善化區,112
# 台南市,學甲區,13
# 台南市,安南區,685
# 台南市,安平區,302
# 台南市,官田區,72
# 台南市,後壁區,1
# 台南市,新化區,4
# 台南市,新市區,294
# 台南市,新營區,179
# 台南市,東區,225
# 台南市,東山區,3
# 台南市,柳營區,26
# 台南市,歸仁區,308
# 台南市,永康區,207
# 台南市,玉井區,21
# 台南市,白河區,4
# 台南市,關廟區,11
# 台南市,麻豆區,34
# 台東縣,卑南鄉,2
# 台東縣,台東市,36
# 台東縣,大武鄉,3
# 台東縣,太麻里鄉,1
# 台東縣,延平鄉,1
# 台東縣,成功鎮,33
# 台東縣,池上鄉,12
# 台東縣,蘭嶼鄉,1
# 台東縣,達仁鄉,1
# 台東縣,金峰鄉,1
# 台東縣,長濱鄉,10
# 台東縣,關山鎮,26
# 台東縣,鹿野鄉,1
# 嘉義市,東區,317
# 嘉義市,西區,513
# 嘉義縣,中埔鄉,39
# 嘉義縣,六腳鄉,7
# 嘉義縣,大埔鄉,10
# 嘉義縣,大林鎮,41
# 嘉義縣,太保市,234
# 嘉義縣,布袋鎮,55
# 嘉義縣,新港鄉,15
# 嘉義縣,朴子市,110
# 嘉義縣,東石鄉,49
# 嘉義縣,梅山鄉,8
# 嘉義縣,民雄鄉,171
# 嘉義縣,水上鄉,31
# 嘉義縣,溪口鄉,9
# 嘉義縣,番路鄉,13
# 嘉義縣,竹崎鄉,7
# 嘉義縣,義竹鄉,3
# 嘉義縣,阿里山鄉,3
# 基隆市,七堵區,57
# 基隆市,中山區,19
# 基隆市,中正區,43
# 基隆市,仁愛區,71
# 基隆市,信義區,65
# 基隆市,安樂區,63
# 基隆市,暖暖區,34
# 宜蘭縣,三星鄉,3
# 宜蘭縣,五結鄉,29
# 宜蘭縣,冬山鄉,27
# 宜蘭縣,員山鄉,2
# 宜蘭縣,宜蘭市,239
# 宜蘭縣,礁溪鄉,126
# 宜蘭縣,羅東鎮,29
# 宜蘭縣,蘇澳鎮,15
# 宜蘭縣,頭城鎮,41
# 屏東縣,九如鄉,2
# 屏東縣,佳冬鄉,3
# 屏東縣,內埔鄉,13
# 屏東縣,南州鄉,2
# 屏東縣,屏東市,52
# 屏東縣,恆春鎮,17
# 屏東縣,新園鄉,3
# 屏東縣,新埤鄉,15
# 屏東縣,東港鎮,11
# 屏東縣,枋寮鄉,5
# 屏東縣,枋山鄉,10
# 屏東縣,林邊鄉,3
# 屏東縣,滿州鄉,9
# 屏東縣,潮州鎮,32
# 屏東縣,獅子鄉,1
# 屏東縣,琉球鄉,2
# 屏東縣,瑪家鄉,3
# 屏東縣,竹田鄉,4
# 屏東縣,萬丹鄉,6
# 屏東縣,車城鄉,3
# 屏東縣,里港鄉,6
# 屏東縣,長治鄉,7
# 屏東縣,鹽埔鄉,3
# 屏東縣,麟洛鄉,6
# 彰化縣,二林鎮,12
# 彰化縣,二水鄉,3
# 彰化縣,伸港鄉,42
# 彰化縣,北斗鎮,24
# 彰化縣,和美鎮,70
# 彰化縣,員林市,170
# 彰化縣,員林鎮,4
# 彰化縣,埔心鄉,3
# 彰化縣,埔鹽鄉,3
# 彰化縣,埤頭鄉,4
# 彰化縣,大城鄉,2
# 彰化縣,大村鄉,1
# 彰化縣,彰化市,174
# 彰化縣,永靖鄉,33
# 彰化縣,溪州鄉,31
# 彰化縣,溪湖鎮,29
# 彰化縣,田中鎮,121
# 彰化縣,田尾鄉,60
# 彰化縣,社頭鄉,59
# 彰化縣,福興鄉,2
# 彰化縣,秀水鄉,6
# 彰化縣,竹塘鄉,3
# 彰化縣,線西鄉,35
# 彰化縣,芬園鄉,17
# 彰化縣,花壇鄉,19
# 彰化縣,芳苑鄉,35
# 彰化縣,鹿港鎮,63
# 新北市,三峽區,133
# 新北市,三芝區,61
# 新北市,三重區,738
# 新北市,中和區,524
# 新北市,五股區,279
# 新北市,八里區,205
# 新北市,土城區,554
# 新北市,坪林區,26
# 新北市,平溪區,25
# 新北市,新店區,458
# 新北市,新莊區,633
# 新北市,板橋區,892
# 新北市,林口區,894
# 新北市,樹林區,500
# 新北市,永和區,339
# 新北市,汐止區,226
# 新北市,泰山區,231
# 新北市,淡水區,461
# 新北市,深坑區,28
# 新北市,烏來區,5
# 新北市,瑞芳區,76
# 新北市,石碇區,3
# 新北市,石門區,52
# 新北市,萬里區,57
# 新北市,蘆洲區,273
# 新北市,貢寮區,10
# 新北市,金山區,65
# 新北市,雙溪區,13
# 新北市,鶯歌區,110
# 新竹市,北區,99
# 新竹市,東區,129
# 新竹市,香山區,36
# 新竹縣,北埔鄉,1
# 新竹縣,寶山鄉,5
# 新竹縣,新埔鎮,1
# 新竹縣,新豐鄉,12
# 新竹縣,橫山鄉,2
# 新竹縣,湖口鄉,38
# 新竹縣,竹北市,81
# 新竹縣,竹東鎮,15
# 新竹縣,芎林鄉,3
# 桃園市,中壢區,1021
# 桃園市,八德區,178
# 桃園市,大園區,539
# 桃園市,大溪區,117
# 桃園市,平鎮區,179
# 桃園市,復興區,7
# 桃園市,新屋區,35
# 桃園市,桃園區,558
# 桃園市,楊梅區,264
# 桃園市,蘆竹區,492
# 桃園市,觀音區,51
# 桃園市,龍潭區,154
# 桃園市,龜山區,752
# 澎湖縣,望安鄉,1
# 澎湖縣,白沙鄉,2
# 澎湖縣,西嶼鄉,3
# 澎湖縣,馬公市,385
# 花蓮縣,吉安鄉,19
# 花蓮縣,壽豐鄉,9
# 花蓮縣,新城鄉,3
# 花蓮縣,玉里鎮,6
# 花蓮縣,瑞穗鄉,22
# 花蓮縣,花蓮市,33
# 花蓮縣,鳳林鎮,4
# 苗栗縣,三灣鄉,1
# 苗栗縣,公館鄉,5
# 苗栗縣,大湖鄉,2
# 苗栗縣,後龍鎮,15
# 苗栗縣,竹南鎮,23
# 苗栗縣,苑裡鎮,8
# 苗栗縣,苗栗市,22
# 苗栗縣,通霄鎮,18
# 苗栗縣,頭份鎮,27
# 苗栗縣,頭屋鄉,3
# 連江縣,北竿鄉,24
# 連江縣,南竿鄉,19
# 連江縣,東引鄉,11
# 連江縣,莒光鄉,5
# 金門縣,烈嶼鄉,4
# 金門縣,金城鎮,14
# 金門縣,金寧鄉,24
# 金門縣,金沙鎮,7
# 金門縣,金湖鎮,26
# 雲林縣,二崙鄉,7
# 雲林縣,元長鄉,18
# 雲林縣,北港鎮,44
# 雲林縣,口湖鄉,7
# 雲林縣,古坑鄉,22
# 雲林縣,台西鄉,13
# 雲林縣,四湖鄉,26
# 雲林縣,土庫鎮,11
# 雲林縣,大埤鄉,3
# 雲林縣,崙背鄉,37
# 雲林縣,斗六市,267
# 雲林縣,斗南鎮,110
# 雲林縣,東勢鄉,2
# 雲林縣,林內鄉,18
# 雲林縣,水林鄉,6
# 雲林縣,莿桐鄉,34
# 雲林縣,虎尾鎮,420
# 雲林縣,褒忠鄉,11
# 雲林縣,西螺鎮,73
# 雲林縣,麥寮鄉,19
# 高雄市,三民區,731
# 高雄市,仁武區,189
# 高雄市,內門區,1
# 高雄市,前金區,83
# 高雄市,前鎮區,711
# 高雄市,大寮區,439
# 高雄市,大樹區,15
# 高雄市,大社區,38
# 高雄市,小港區,283
# 高雄市,岡山區,428
# 高雄市,左營區,226
# 高雄市,彌陀區,21
# 高雄市,新興區,181
# 高雄市,旗山區,51
# 高雄市,旗津區,23
# 高雄市,杉林區,1
# 高雄市,林園區,120
# 高雄市,桃源區,1
# 高雄市,梓官區,54
# 高雄市,楠梓區,207
# 高雄市,橋頭區,341
# 高雄市,永安區,62
# 高雄市,湖內區,93
# 高雄市,燕巢區,26
# 高雄市,甲仙區,14
# 高雄市,美濃區,9
# 高雄市,苓雅區,501
# 高雄市,茄萣區,118
# 高雄市,路竹區,134
# 高雄市,阿蓮區,6
# 高雄市,鳥松區,94
# 高雄市,鳳山區,799
# 高雄市,鹽埕區,143
# 高雄市,鼓山區,291
```

## Task 2 
- Design a data platform architecture with storage, etl and query service base on cloud, also describe the concept of your design.

<img src ="https://github.com/yennanliu/FlinkHelloWorld/blob/master/flink-project/doc/architecture_V1.svg" width="800" height="400">

- Architecture idea
	- Use `AWS data-pipeline` process/migrate data within data sources, DynamoDB, and EMR, as well as simple data ETL pipeline
	- Use `AWS S3` as datalake save all raw/staging data,
	can process S3 data via EMR or query via Athena/Redshift select for data analytics purposes
	- Use `AWS Redshift` as datawarehouse. Expose data via SQL platfrom make data user can digest/query data per business needs
	- Use `AWS EMR` as computing cluster for scalable computing. load data from S3, save intermedia/master back to S3, Redshift, RDS...
	- Output data product to BI tool/platform. Give down-stream apps master data for reporting/analytics/ML.
